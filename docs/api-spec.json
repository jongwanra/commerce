{"openapi":"3.0.1","info":{"title":"Commerce API Sepecifiaction","description":"## 공유 사항\n\t1. Database + Cookie 기반으로 인증을 처리합니다. (TODO)\n\t2. 일시는 전부 `UTC`로 통일합니다.\n","version":"v1"},"servers":[{"url":"http://localhost:8080"}],"paths":{"/api/v1/me/payments":{"post":{"tags":["Payment"],"summary":"결제","description":"사용자의 잔액으로 주문한 상품을 결제합니다.\n","operationId":"makePayment","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/PaymentMakeRequest"}}},"required":true},"responses":{"201":{"description":"Created","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"code":{"type":"string","example":"CM-0001"},"message":{"type":"string","example":"정상 생성되었습니다."},"data":{"$ref":"#/components/schemas/EmptyResponse"}}}}}},"401\n(AU-0001)":{"description":"인증되지 않은 사용자입니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"AU-0001"},"message":{"type":"string","example":"인증되지 않은 사용자입니다."},"data":{"type":"string","example":{}}}}}}},"403\n(AU-0002)":{"description":"접근 권한이 없는 사용자입니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"AU-0002"},"message":{"type":"string","example":"접근 권한이 없는 사용자입니다."},"data":{"type":"string","example":{}}}}}}},"400\n(CH-0004)":{"description":"잔액이 부족합니다. 잔액을 충전해주세요.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"CH-0004"},"message":{"type":"string","example":"잔액이 부족합니다. 잔액을 충전해주세요."},"data":{"type":"string","example":{}}}}}}},"400\n(PY-0001)":{"description":"예상 결제 금액과 실제 결제 금액이 일치하지 않습니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"PY-0001"},"message":{"type":"string","example":"예상 결제 금액과 실제 결제 금액이 일치하지 않습니다."},"data":{"type":"string","example":{}}}}}}},"400\n(OR-0001)":{"description":"존재하지 않는 주문입니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"OR-0001"},"message":{"type":"string","example":"존재하지 않는 주문입니다."},"data":{"type":"string","example":{}}}}}}},"400\n(UC-0001)":{"description":"이용 불가능한 쿠폰입니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"UC-0001"},"message":{"type":"string","example":"이용 불가능한 쿠폰입니다."},"data":{"type":"string","example":{}}}}}}}}}},"/api/v1/me/orders":{"post":{"tags":["Order"],"summary":"주문","operationId":"placeOrder","requestBody":{"content":{"application/json":{"schema":{"$ref":"#/components/schemas/OrderPlaceRequest"}}},"required":true},"responses":{"201":{"description":"Created","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"code":{"type":"string","example":"CM-0001"},"message":{"type":"string","example":"정상 생성되었습니다."},"data":{"$ref":"#/components/schemas/EmptyResponse"}}}}}},"401\n(AU-0001)":{"description":"인증되지 않은 사용자입니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"AU-0001"},"message":{"type":"string","example":"인증되지 않은 사용자입니다."},"data":{"type":"string","example":{}}}}}}},"400\n(OR-0003)":{"description":"주문할 상품은 최소 1개 이상이어야 합니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"OR-0003"},"message":{"type":"string","example":"주문할 상품은 최소 1개 이상이어야 합니다."},"data":{"type":"string","example":{}}}}}}},"400\n(OR-0004)":{"description":"주문 수량은 1개 이상이어야 합니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"OR-0004"},"message":{"type":"string","example":"주문 수량은 1개 이상이어야 합니다."},"data":{"type":"string","example":{}}}}}}},"400\n(PT-0001)":{"description":"존재하지 않는 상품입니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"PT-0001"},"message":{"type":"string","example":"존재하지 않는 상품입니다."},"data":{"type":"string","example":{}}}}}}},"400\n(PT-0002)":{"description":"상품의 재고가 부족합니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"PT-0002"},"message":{"type":"string","example":"상품의 재고가 부족합니다."},"data":{"type":"string","example":{}}}}}}}}}},"/api/v1/me/coupons/{couponId}/issue":{"post":{"tags":["UserCoupon"],"summary":"쿠폰 발급","operationId":"issue","parameters":[{"name":"couponId","in":"path","description":"쿠폰 고유 식별자","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"201":{"description":"Created","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"code":{"type":"string","example":"CM-0001"},"message":{"type":"string","example":"정상 생성되었습니다."},"data":{"$ref":"#/components/schemas/EmptyResponse"}}}}}},"401\n(AU-0001)":{"description":"인증되지 않은 사용자입니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"AU-0001"},"message":{"type":"string","example":"인증되지 않은 사용자입니다."},"data":{"type":"string","example":{}}}}}}},"400\n(CP-0001)":{"description":"존재하지 않는 쿠폰입니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"CP-0001"},"message":{"type":"string","example":"존재하지 않는 쿠폰입니다."},"data":{"type":"string","example":{}}}}}}},"400\n(CP-0002)":{"description":"만료된 쿠폰입니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"CP-0002"},"message":{"type":"string","example":"만료된 쿠폰입니다."},"data":{"type":"string","example":{}}}}}}},"400\n(CP-0004)":{"description":"이미 발급 받은 쿠폰입니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"CP-0004"},"message":{"type":"string","example":"이미 발급 받은 쿠폰입니다."},"data":{"type":"string","example":{}}}}}}},"400\n(CP-0003)":{"description":"재고가 소진된 쿠폰입니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"CP-0003"},"message":{"type":"string","example":"재고가 소진된 쿠폰입니다."},"data":{"type":"string","example":{}}}}}}}}}},"/api/v1/me/cash/charge":{"patch":{"tags":["Cash"],"summary":"잔액 충전","operationId":"charge","parameters":[{"name":"amount","in":"query","description":"충전할 금액","required":true,"schema":{"type":"number"},"example":10000}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"code":{"type":"string","example":"CM-0000"},"message":{"type":"string","example":"정상 처리되었습니다."},"data":{"$ref":"#/components/schemas/EmptyResponse"}}}}}},"401\n(AU-0001)":{"description":"인증되지 않은 사용자입니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"AU-0001"},"message":{"type":"string","example":"인증되지 않은 사용자입니다."},"data":{"type":"string","example":{}}}}}}},"400\n(CH-0001)":{"description":"사용자의 잔액 정보가 존재하지 않습니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"CH-0001"},"message":{"type":"string","example":"사용자의 잔액 정보가 존재하지 않습니다."},"data":{"type":"string","example":{}}}}}}},"400\n(CH-0002)":{"description":"충전 금액은 0원보다 커야 합니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"CH-0002"},"message":{"type":"string","example":"충전 금액은 0원보다 커야 합니다."},"data":{"type":"string","example":{}}}}}}},"400\n(CH-0003)":{"description":"한 번에 %s원을 초과하여 충전할 수 없습니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"CH-0003"},"message":{"type":"string","example":"한 번에 %s원을 초과하여 충전할 수 없습니다."},"data":{"type":"string","example":{}}}}}}}}}},"/api/v1/products":{"get":{"tags":["Product"],"summary":"상품 목록 페이지네이션 조회","operationId":"readPage","parameters":[{"name":"lastId","in":"query","description":"조회 목록 중, 마지막 항목의 고유 식별자, 첫 페이지 호출 시: 0","required":true,"schema":{"type":"integer","description":"조회 목록 중, 마지막 항목의 고유 식별자, 첫 페이지 호출 시: 0","format":"int64","example":0},"example":0},{"name":"size","in":"query","description":"페이지 크기, 최대 50","required":true,"schema":{"maximum":50,"minimum":1,"type":"integer","description":"페이지 크기, 최대 50","format":"int32","example":10},"example":10},{"name":"sort","in":"query","description":"- 정렬 기준 (기본값: newest)\n\t- newest: 최신순\n\t- oldest: 오래된순\n","required":false,"schema":{"type":"string","description":"- 정렬 기준 (기본값: newest)\n\t- newest: 최신순\n\t- oldest: 오래된순\n","nullable":true,"example":"newest"},"example":"newest"}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"code":{"type":"string","example":"CM-0000"},"message":{"type":"string","example":"정상 처리되었습니다."},"data":{"$ref":"#/components/schemas/CursorPageProductSummaryResponse"}}}}}}}}},"/api/v1/product/{productId}":{"get":{"tags":["Product"],"summary":"상품 상세 조회","operationId":"readById","parameters":[{"name":"productId","in":"path","description":"상품 고유 식별자","required":true,"schema":{"type":"integer","format":"int64"}}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"code":{"type":"string","example":"CM-0000"},"message":{"type":"string","example":"정상 처리되었습니다."},"data":{"$ref":"#/components/schemas/ProductDetailResponse"}}}}}},"400\n(PT-0001)":{"description":"존재하지 않는 상품입니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"PT-0001"},"message":{"type":"string","example":"존재하지 않는 상품입니다."},"data":{"type":"string","example":{}}}}}}}}}},"/api/v1/me/coupons":{"get":{"tags":["UserCoupon"],"summary":"내 쿠폰 목록 페이지네이션 조회","operationId":"readPage_1","parameters":[{"name":"lastId","in":"query","description":"조회 목록 중, 마지막 항목의 고유 식별자, 첫 페이지 호출 시: 0","required":true,"schema":{"type":"integer","description":"조회 목록 중, 마지막 항목의 고유 식별자, 첫 페이지 호출 시: 0","format":"int64","example":0},"example":0},{"name":"size","in":"query","description":"페이지 크기, 최대 50","required":true,"schema":{"maximum":50,"minimum":1,"type":"integer","description":"페이지 크기, 최대 50","format":"int32","example":10},"example":10}],"responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"code":{"type":"string","example":"CM-0000"},"message":{"type":"string","example":"정상 처리되었습니다."},"data":{"$ref":"#/components/schemas/CursorPageUserCouponSummaryResponse"}}}}}},"401\n(AU-0001)":{"description":"인증되지 않은 사용자입니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"AU-0001"},"message":{"type":"string","example":"인증되지 않은 사용자입니다."},"data":{"type":"string","example":{}}}}}}}}}},"/api/v1/me/cash":{"get":{"tags":["Cash"],"summary":"잔액 조회","operationId":"readBalance","responses":{"200":{"description":"OK","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":true},"code":{"type":"string","example":"CM-0000"},"message":{"type":"string","example":"정상 처리되었습니다."},"data":{"$ref":"#/components/schemas/CashDetailResponse"}}}}}},"401\n(AU-0001)":{"description":"인증되지 않은 사용자입니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"AU-0001"},"message":{"type":"string","example":"인증되지 않은 사용자입니다."},"data":{"type":"string","example":{}}}}}}},"400\n(CH-0001)":{"description":"사용자의 잔액 정보가 존재하지 않습니다.","content":{"application/json":{"schema":{"properties":{"success":{"type":"boolean","example":false},"code":{"type":"string","example":"CH-0001"},"message":{"type":"string","example":"사용자의 잔액 정보가 존재하지 않습니다."},"data":{"type":"string","example":{}}}}}}}}}}},"components":{"schemas":{"EmptyResponse":{"type":"object"},"PaymentMakeRequest":{"required":["expectedPaymentAmount","orderId"],"type":"object","properties":{"orderId":{"type":"integer","description":"결제할 주문 고유 식별자","format":"int64","example":456},"userCouponId":{"type":"integer","description":"사용자 쿠폰 고유 식별자","format":"int64","nullable":true,"example":789},"expectedPaymentAmount":{"type":"number","description":"예상 결제 금액 클라이언트/서버 간 금액 일치 여부 확인","example":15000}}},"OrderLineRequest":{"required":["orderQuantity","productId"],"type":"object","properties":{"productId":{"type":"integer","description":"주문할 상품 고유 식별자","format":"int64","example":122},"orderQuantity":{"type":"integer","description":"주문 수량","format":"int32","example":3}}},"OrderPlaceRequest":{"required":["orderLines"],"type":"object","properties":{"orderLines":{"type":"array","items":{"$ref":"#/components/schemas/OrderLineRequest"}}}},"CursorPageProductSummaryResponse":{"type":"object","properties":{"totalCount":{"type":"integer","format":"int64"},"hasNext":{"type":"boolean"},"items":{"type":"array","items":{"$ref":"#/components/schemas/ProductSummaryResponse"}}}},"ProductSummaryResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"price":{"type":"number"},"createdAt":{"type":"string","format":"date-time"}}},"ProductDetailResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"name":{"type":"string"},"price":{"type":"number"},"stock":{"type":"integer","format":"int32"},"createdAt":{"type":"string","format":"date-time"}}},"CursorPageUserCouponSummaryResponse":{"type":"object","properties":{"totalCount":{"type":"integer","format":"int64"},"hasNext":{"type":"boolean"},"items":{"type":"array","items":{"$ref":"#/components/schemas/UserCouponSummaryResponse"}}}},"UserCouponSummaryResponse":{"type":"object","properties":{"id":{"type":"integer","format":"int64"},"couponId":{"type":"integer","format":"int64"},"name":{"type":"string"},"discountType":{"type":"string","enum":["PERCENT","FIXED"]},"discountValue":{"type":"number"},"status":{"type":"string","enum":["AVAILABLE","USED"]},"issuedAt":{"type":"string","format":"date-time"},"expiredAt":{"type":"string","format":"date-time"}}},"CashDetailResponse":{"type":"object","properties":{"balance":{"type":"number"},"modifiedAt":{"type":"string","format":"date-time"}}}}}}